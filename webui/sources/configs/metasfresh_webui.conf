<VirtualHost *:80>
        ProxyRequests Off
        DocumentRoot /opt/metasfresh-webui-frontend/dist/
        ErrorLog ${APACHE_LOG_DIR}/webui_error.log
        CustomLog ${APACHE_LOG_DIR}/webui_access.log combined
        <Location /rest>
                Order allow,deny
                Allow from all
                ProxyPass http://webapi:8080/rest/
                ProxyPassReverse  http://webapi:8080/rest/
        </Location>
        <Location /stomp>
		Order allow,deny
                Allow from all
                RewriteEngine on
		RewriteCond %{HTTP:UPGRADE} ^WebSocket$ [NC]
		RewriteCond %{HTTP:CONNECTION} Upgrade$ [NC]
		RewriteRule .* ws://webapi:8080%{REQUEST_URI} [P] 
                ProxyPass ws://webapi:8080/stomp/
                ProxyPassReverse ws://webapi:8080/stomp/
                ProxyPass http://webapi:8080/stomp/
                ProxyPassReverse http://webapi:8080/stomp/
        </Location>
        <Directory /opt/metasfresh-webui-frontend/dist/>
                 Options Indexes FollowSymLinks
                 AllowOverride All
                 Require all granted
		 RewriteEngine On
		 RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f [OR]
		 RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -d
		 RewriteRule ^ - [L]
  		 RewriteRule ^ /index.html
        </Directory>
</VirtualHost>
